<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PyGalaxy â€” Ø¯Ø±ÙˆØ³ Ø¨Ø§ÙŠØ«ÙˆÙ† ØªÙØ§Ø¹Ù„ÙŠØ© Ø¨Ø«Ù„Ø§Ø« Ù„ØºØ§Øª</title>
  <meta name="description" content="Ù…Ù†Ù‡Ø¬ ØªÙØ§Ø¹Ù„ÙŠ Ù„ØªØ¹Ù„Ù‘Ù… Ø¨Ø§ÙŠØ«ÙˆÙ† Ù…Ù† Ø§Ù„ØµÙØ± Ø­ØªÙ‰ Ø§Ù„Ø§Ø­ØªØ±Ø§Ù â€” ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ù€ HTML/CSS/JS ÙÙ‚Ø·. ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© ÙˆØ§Ù„ÙØ±Ù†Ø³ÙŠØ©ØŒ ØªÙ‚Ø¯Ù‘Ù… Ù…Ø­ÙÙˆØ¸ØŒ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙÙˆØ±ÙŠØ©ØŒ ÙˆÙ…Ø­Ø±Ù‘Ø± ÙƒÙˆØ¯ Ø¨Ø³ÙŠØ·." />
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"/>

  <style>
    /* ===========================================================
       PyGalaxy â€” Multilingual, Neon Futuristic UI (AR / EN / FR)
       Pure HTML/CSS/JS â€” No external libraries.
       =========================================================== */

    :root{
      --bg:#0a0e1a;           /* Background */
      --panel:#0e1326;        /* Panels */
      --panel-2:#0c1020;      /* Secondary panel */
      --text:#eef2ff;         /* Main text */
      --muted:#a5b4fc;        /* Muted text */
      --accent:#22d3ee;       /* Cyan */
      --accent-2:#8b5cf6;     /* Purple */
      --accent-3:#f472b6;     /* Pink */
      --good:#22c55e;         /* Green */
      --warn:#f59e0b;         /* Yellow */
      --bad:#ef4444;          /* Red */
      --border:#1f2547;       /* Border */
      --glass:rgba(255,255,255,.06);
      --shadow:0 20px 60px rgba(0,0,0,.4), 0 6px 20px rgba(0,0,0,.25);
      --radius:20px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      background:
        radial-gradient(1000px 500px at -10% -10%, rgba(34,211,238,.15), transparent 60%),
        radial-gradient(900px 500px at 110% 0%, rgba(139,92,246,.14), transparent 60%),
        linear-gradient(180deg, #060913, var(--bg) 30%, #060913 100%);
      font-family: "Cairo", "Inter", system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Arial;
      overflow-x:hidden;
    }

    /* ===== Layout ===== */
    .app{display:grid; grid-template-columns: 300px 1fr; min-height:100vh; gap:0}
    aside{
      position:sticky; top:0; height:100vh; overflow:auto; padding:18px;
      border-inline-start:1px solid var(--border);
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.0)), var(--panel);
      box-shadow:inset 0 1px 0 rgba(255,255,255,.04);
    }
    main{padding:18px 18px 60px;}

    /* ===== Header / Hero ===== */
    .hero{
      position:relative;
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:22px;
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-30%;
      background:
        radial-gradient(600px 200px at 80% 0%, rgba(34,211,238,.15), transparent 40%),
        radial-gradient(700px 240px at 10% 120%, rgba(139,92,246,.15), transparent 40%);
      filter: blur(10px); z-index:0; pointer-events:none
    }
    .badge{
      display:inline-flex; gap:8px; align-items:center;
      padding:6px 12px; border:1px solid var(--border);
      border-radius:999px; color:var(--muted); background:rgba(255,255,255,.04)
    }
    .title{
      position:relative; z-index:1; margin:10px 0 4px;
      font-size:clamp(26px, 3.6vw, 44px); line-height:1.1
    }
    .title span{
      background: linear-gradient(90deg, var(--accent), var(--accent-2), var(--accent-3));
      -webkit-background-clip:text; background-clip:text; color:transparent
    }
    .lead{margin:0; color:var(--muted)}

    /* ===== Topbar (inside hero) ===== */
    .topbar{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; margin-bottom:8px
    }
    .lang-picker{
      display:flex; gap:8px; align-items:center; background:rgba(255,255,255,.04);
      border:1px solid var(--border); border-radius:999px; padding:6px 10px
    }
    .lang-picker select{
      background:transparent; border:0; color:var(--text); font-weight:700; outline:none; cursor:pointer
    }
    .lang-note{color:var(--muted); font-size:12px}

    /* ===== Sidebar ===== */
    .logo{display:flex; gap:10px; align-items:center; font-weight:800; letter-spacing:.5px; margin-bottom:12px}
    .logo .dot{width:10px; height:10px; border-radius:999px; background:conic-gradient(from 0deg, var(--accent), var(--accent-2), var(--accent-3)); filter:drop-shadow(0 0 8px rgba(34,211,238,.6))}
    .search{position:relative; margin:14px 0}
    .search input{width:100%; padding:10px 36px 10px 12px; border-radius:12px; border:1px solid var(--border); background:var(--panel-2); color:var(--text)}
    .search svg{position:absolute; left:10px; top:50%; transform:translateY(-50%); opacity:.7}
    .nav-section-title{margin:16px 6px 8px; color:var(--muted); font-weight:700; font-size:13px}
    .lesson-link{display:flex; gap:8px; padding:10px; margin:6px 0; border-radius:12px; border:1px solid var(--border); background:var(--panel-2); cursor:pointer; align-items:center}
    .lesson-link:hover{background:rgba(255,255,255,.06)}
    .lesson-link.done{outline:2px solid rgba(34,197,94,.35)}
    .lesson-link small{color:var(--muted)}
    .stats{display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:14px}
    .stat{padding:10px; border:1px dashed var(--border); border-radius:14px; background:rgba(255,255,255,.03)}
    .bar{height:8px; background:#0b1022; border-radius:999px; overflow:hidden; border:1px solid var(--border)}
    .bar .fill{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--accent-2)); box-shadow:0 0 16px rgba(34,211,238,.6) inset}
    .chips{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
    .chip{padding:6px 10px; border-radius:999px; border:1px dashed var(--border); background:rgba(255,255,255,.04); font-size:12px; color:var(--muted); cursor:pointer}
    .chip.active{outline:2px solid rgba(139,92,246,.35)}

    /* ===== Cards / Sections ===== */
    .section{margin-top:18px}
    .card{border:1px solid var(--border); border-radius:var(--radius); background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); box-shadow:var(--shadow)}
    .card .head{display:flex; justify-content:space-between; align-items:center; padding:14px 16px; border-bottom:1px solid var(--border)}
    .card .head h2{margin:0; font-size:20px}
    .card .head .actions{display:flex; gap:8px; flex-wrap:wrap}
    .btn{cursor:pointer; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text); padding:8px 12px; border-radius:12px; font-weight:700}
    .btn:hover{background:rgba(255,255,255,.08)}
    .btn.ghost{background:transparent}
    .btn.slim{padding:6px 10px; font-weight:600; border-radius:10px}
    .content{padding:16px}
    .two-col{display:grid; grid-template-columns:1.1fr 1fr; gap:14px}
    @media (max-width: 1000px){
      .app{grid-template-columns: 1fr}
      aside{position:static; height:auto}
      .two-col{grid-template-columns:1fr}
    }

    /* ===== Lesson ===== */
    .lesson{border:1px solid var(--border); border-radius:16px; margin:12px 0; overflow:hidden}
    .lesson .header{display:flex; justify-content:space-between; align-items:center; gap:8px; padding:12px 14px; background:var(--panel-2); cursor:pointer}
    .lesson .header h3{margin:0; font-size:18px}
    .lesson .meta{display:flex; gap:8px; align-items:center; color:var(--muted); font-size:12px}
    .lesson .body{display:none; padding:14px; background:rgba(255,255,255,.02)}
    .lesson.open .body{display:block}
    .kbd{padding:2px 8px; border:1px solid var(--border); border-bottom-width:3px; border-radius:8px; background:rgba(255,255,255,.04)}

    /* ===== Code Editor (fake-run) ===== */
    .codebox{border:1px solid var(--border); border-radius:14px; overflow:hidden; background:linear-gradient(180deg, #0b0f24, #0a0d20)}
    .codebox .toolbar{display:flex; justify-content:space-between; align-items:center; padding:10px 12px; border-bottom:1px solid var(--border)}
    .codebox .toolbar .title{font-weight:700; color:#c7d2fe}
    .codebox .toolbar .actions{display:flex; gap:8px}
    textarea.editor{width:100%; min-height:130px; resize:vertical; padding:12px; color:#e5e7eb; background:transparent; border:0; outline:none; font-family:var(--mono); font-size:13.8px; line-height:1.6}
    .output{padding:12px; font-family:var(--mono); background:#0b1120; color:#e5e7eb; border-top:1px dashed var(--border); min-height:46px}
    .hint{margin-top:8px; color:var(--muted); font-size:13px}

    /* ===== Quiz ===== */
    .quiz{border:1px dashed var(--border); border-radius:12px; padding:14px; background:rgba(255,255,255,.03); margin-top:8px}
    .quiz h4{margin:0 0 8px}
    .quiz .option{display:flex; gap:8px; align-items:center; padding:8px; border-radius:10px; border:1px solid var(--border); cursor:pointer; margin:6px 0; background:var(--panel-2)}
    .quiz .option input{accent-color:var(--accent-2)}
    .quiz .result{margin-top:8px; font-weight:700}

    /* ===== Footer ===== */
    footer{margin:24px 0 0; color:var(--muted); text-align:center}

    /* ===== Animations ===== */
    @keyframes float{0%{transform:translateY(0)} 50%{transform:translateY(-6px)} 100%{transform:translateY(0)}}
    .float{animation: float 6s ease-in-out infinite}

    /* ===== Toggle ===== */
    .switch{display:inline-flex; gap:10px; align-items:center}
    .switch input{display:none}
    .switch .track{width:54px; height:28px; background:var(--panel-2); border:1px solid var(--border); border-radius:999px; position:relative}
    .switch .thumb{position:absolute; top:2px; right:2px; width:24px; height:24px; border-radius:50%; background:linear-gradient(180deg, var(--accent), var(--accent-2)); box-shadow:0 4px 12px rgba(34,211,238,.4)}
    .switch input:checked + .track .thumb{right:28px}

    /* ===== Toast ===== */
    .toast{position:fixed; bottom:20px; right:20px; z-index:9999; padding:12px 14px; background:rgba(17,24,39,.9); color:#fff; border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow); display:none}
    .toast.show{display:block}

    /* ===== Utilities ===== */
    .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .spacer{flex:1}
    .muted{color:var(--muted)}
    .pill{display:inline-flex; gap:6px; align-items:center; border:1px solid var(--border); padding:4px 8px; border-radius:999px; background:rgba(255,255,255,.04); font-size:12px}
    .sep{opacity:.4}
  </style>
</head>
<body>
  <div class="app" id="app">
    <!-- ================= Sidebar ================= -->
    <aside>
      <div class="logo" title="PyGalaxy">
        <span class="dot" aria-hidden="true"></span>
        <div>PyGalaxy <small style="color:var(--muted); font-weight:600">by HTML/CSS/JS</small></div>
      </div>

      <div class="search" role="search">
        <input id="search" type="text" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¯Ø±ÙˆØ³â€¦" aria-label="Search lessons"/>
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>

      <div class="nav-section-title" data-i18n="levels">Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª</div>
      <div class="chips" id="levelChips">
        <div class="chip active" data-filter="all" data-i18n="level_all">Ø§Ù„ÙƒÙ„</div>
        <div class="chip" data-filter="beginner" data-i18n="level_beginner">Ù…Ø¨ØªØ¯Ø¦</div>
        <div class="chip" data-filter="intermediate" data-i18n="level_intermediate">Ù…ØªÙˆØ³Ø·</div>
        <div class="chip" data-filter="advanced" data-i18n="level_advanced">Ù…ØªÙ‚Ø¯Ù…</div>
      </div>

      <div class="nav-section-title" data-i18n="lessons">Ø§Ù„Ø¯Ø±ÙˆØ³</div>
      <div id="lessonList" aria-live="polite">
        <!-- Filled dynamically -->
      </div>

      <div class="stats" aria-label="Progress">
        <div class="stat">
          <div class="row" style="justify-content:space-between; margin-bottom:6px">
            <strong data-i18n="progress">Ø§Ù„ØªÙ‚Ø¯Ù…</strong><span id="progressPct">0%</span>
          </div>
          <div class="bar"><div class="fill" id="progressBar"></div></div>
        </div>
        <div class="stat">
          <div class="row" style="justify-content:space-between; margin-bottom:6px">
            <strong data-i18n="units">Ø§Ù„ÙˆØ­Ø¯Ø§Øª</strong><span id="completedCount">0/0</span>
          </div>
          <div style="font-size:12px; color:var(--muted)" id="streakMsg">Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ streak Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ ğŸ”¥</div>
        </div>
      </div>
    </aside>

    <!-- ================= Main ================= -->
    <main>
      <section class="hero card" aria-label="Intro">
        <div class="topbar">
          <div class="badge float" id="badgeLine">ğŸš€ Ø±Ø­Ù„Ø© Ø§Ø­ØªØ±Ø§Ù Ø¨Ø§ÙŠØ«ÙˆÙ† â€” ØªØ¯Ø±Ù‘Ø¬ Ø°ÙƒÙŠ + ØªÙØ§Ø¹Ù„ Ù…Ù…ØªØ¹</div>

          <div class="row">
            <div class="lang-picker" title="Language / Ø§Ù„Ù„ØºØ© / Langue">
              <span class="muted" id="langLabel">ğŸŒ Ø§Ù„Ù„ØºØ©</span>
              <select id="langSelect" aria-label="Language selector">
                <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="en">English</option>
                <option value="fr">FranÃ§ais</option>
              </select>
            </div>

            <div class="pill" title="Export / Import">
              <button class="btn slim" id="exportBtn" data-i18n="export">ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù‘Ù…</button>
              <span class="sep">|</span>
              <label class="btn slim" for="importFile" id="importLbl" data-i18n="import">Ø§Ø³ØªÙŠØ±Ø§Ø¯</label>
              <input id="importFile" type="file" accept="application/json" style="display:none"/>
            </div>
          </div>
        </div>

        <h1 class="title" id="heroTitle">ØªØ¹Ù„Ù… <span>Python</span> Ù…Ù† Ø§Ù„ØµÙØ± Ø­ØªÙ‰ Ø§Ù„Ø§Ø­ØªØ±Ø§Ù â€” Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©</h1>
        <p class="lead" id="heroLead">ÙˆØ§Ø¬Ù‡Ø© Ø®ÙÙŠÙØ©ØŒ Ø£Ù„ÙˆØ§Ù† Ù†ÙŠÙˆÙ† ØªØ¨Ø¹Ø« Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø´Ø§Ø·ØŒ ØªÙ‚Ø¯Ù‘Ù… Ù…Ø­ÙÙˆØ¸ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ØŒ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙÙˆØ±ÙŠØ©ØŒ ÙˆÙ…Ø­Ø±Ù‘Ø± ÙƒÙˆØ¯ Ø¨Ø³ÙŠØ· ÙŠÙˆØ¶Ø­ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©. â€” Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ù…ÙƒØªØ¨Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ©.</p>
      </section>

      <!-- ====== Controls ====== -->
      <div class="section card" aria-label="Control Panel">
        <div class="head">
          <h2 data-i18n="control_panel">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
          <div class="actions">
            <label class="switch" title="Smart mode">
              <input type="checkbox" id="smartMode" />
              <div class="track"><div class="thumb"></div></div>
            </label>
            <span class="muted" id="smartLabel">ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø°ÙƒÙŠ</span>
            <button class="btn" id="expandAll" data-i18n="open_all">ÙØªØ­ Ø§Ù„ÙƒÙ„</button>
            <button class="btn ghost" id="collapseAll" data-i18n="collapse_all">Ø·ÙŠÙ‘ Ø§Ù„ÙƒÙ„</button>
            <button class="btn" id="resetProgress" data-i18n="reset">ØªØµÙÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù…</button>
          </div>
        </div>
        <div class="content">
          <div class="two-col">
            <div>
              <p id="tipTitle">Ù†ØµÙŠØ­Ø© ğŸ‘‡</p>
              <ul id="tipsList">
                <li>Ø§Ù‚Ø±Ø£ Ø§Ù„Ø¯Ø±Ø³ØŒ Ø¬Ø±Ù‘Ø¨ ÙÙŠ Ø§Ù„Ù…Ø­Ø±Ø±ØŒ Ø«Ù… Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ ÙÙŠ ÙƒÙˆÙŠØ² Ø³Ø±ÙŠØ¹.</li>
                <li>Ø¶Ø¹ Ø¹Ù„Ø§Ù…Ø© <span class="kbd">ØªÙ…</span> Ø¹Ù†Ø¯ ÙÙ‡Ù…Ùƒ Ù„Ù„Ø¯Ø±Ø³ â€” ÙŠÙØ­Ø³Ø¨ Ø§Ù„ØªÙ‚Ø¯Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.</li>
                <li>Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¨Ø­Ø« Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø­Ø¯Ø¯.</li>
              </ul>
            </div>
            <div>
              <p class="muted" id="smartDesc">ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø°ÙƒÙŠ ÙŠÙØªØ­ Ù„Ùƒ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ§Ù„ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø§Ø¬ØªÙŠØ§Ø² Ø§Ù„ÙƒÙˆÙŠØ². Ø¥Ù† Ø£Ø­Ø¨Ø¨Øª Ø§Ù„ØªØ­Ø¯ÙŠØŒ Ø£Ø·ÙÙØ¦Ù‡ ÙˆØªØ¬ÙˆÙ‘Ù„ Ø¨Ø­Ø±ÙŠØ©.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ====== Curriculum ====== -->
      <div id="curriculum" class="section" aria-live="polite" aria-label="Curriculum">
        <!-- Lessons build dynamically -->
      </div>

      <footer>
        <span id="footerMade">ØµÙÙ†Ø¹ Ø¨Ø­Ø¨ ÙˆØ¨Ù‚ÙˆØ© Ø§Ù„Ù€</span> <span style="color:var(--accent)">HTML/CSS/JS</span>.
        <span id="footerHydrate">Ù„Ø§ ØªÙ†Ø³Ù Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡ ÙˆØ­Ù„ Ù…Ø³Ø£Ù„Ø© Ø¥Ø¶Ø§ÙÙŠØ© Ø§Ù„ÙŠÙˆÙ…!</span> ğŸ§ ğŸ’§
      </footer>
    </main>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    /* ============================================================
       Multilingual i18n (AR/EN/FR) â€” UI strings & helpers
       ============================================================ */

    const LANG_KEY = 'pygalaxy.lang.v1';
    const STORAGE_KEY = 'pygalaxy.progress.v1';
    const SMART_KEY   = 'pygalaxy.smartMode.v1';

    const i18n = {
      ar: {
        _dir: 'rtl',
        _lang: 'ar',
        _name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
        hero_badge: "ğŸš€ Ø±Ø­Ù„Ø© Ø§Ø­ØªØ±Ø§Ù Ø¨Ø§ÙŠØ«ÙˆÙ† â€” ØªØ¯Ø±Ù‘Ø¬ Ø°ÙƒÙŠ + ØªÙØ§Ø¹Ù„ Ù…Ù…ØªØ¹",
        hero_title: "ØªØ¹Ù„Ù… <span>Python</span> Ù…Ù† Ø§Ù„ØµÙØ± Ø­ØªÙ‰ Ø§Ù„Ø§Ø­ØªØ±Ø§Ù â€” Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©",
        hero_lead:  "ÙˆØ§Ø¬Ù‡Ø© Ø®ÙÙŠÙØ©ØŒ Ø£Ù„ÙˆØ§Ù† Ù†ÙŠÙˆÙ† ØªØ¨Ø¹Ø« Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø´Ø§Ø·ØŒ ØªÙ‚Ø¯Ù‘Ù… Ù…Ø­ÙÙˆØ¸ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ØŒ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙÙˆØ±ÙŠØ©ØŒ ÙˆÙ…Ø­Ø±Ù‘Ø± ÙƒÙˆØ¯ Ø¨Ø³ÙŠØ· ÙŠÙˆØ¶Ø­ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©. â€” Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ù…ÙƒØªØ¨Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ©.",
        lang_label: "ğŸŒ Ø§Ù„Ù„ØºØ©",
        export: "ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù‘Ù…",
        import: "Ø§Ø³ØªÙŠØ±Ø§Ø¯",
        levels: "Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª",
        lessons: "Ø§Ù„Ø¯Ø±ÙˆØ³",
        progress: "Ø§Ù„ØªÙ‚Ø¯Ù…",
        units: "Ø§Ù„ÙˆØ­Ø¯Ø§Øª",
        streak: "Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ streak Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠ ğŸ”¥",
        level_all: "Ø§Ù„ÙƒÙ„",
        level_beginner: "Ù…Ø¨ØªØ¯Ø¦",
        level_intermediate: "Ù…ØªÙˆØ³Ø·",
        level_advanced: "Ù…ØªÙ‚Ø¯Ù…",
        cp: "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",
        open_all: "ÙØªØ­ Ø§Ù„ÙƒÙ„",
        collapse_all: "Ø·ÙŠÙ‘ Ø§Ù„ÙƒÙ„",
        reset: "ØªØµÙÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù…",
        tip_title: "Ù†ØµÙŠØ­Ø© ğŸ‘‡",
        tips: [
          "Ø§Ù‚Ø±Ø£ Ø§Ù„Ø¯Ø±Ø³ØŒ Ø¬Ø±Ù‘Ø¨ ÙÙŠ Ø§Ù„Ù…Ø­Ø±Ø±ØŒ Ø«Ù… Ø§Ø®ØªØ¨Ø± Ù†ÙØ³Ùƒ ÙÙŠ ÙƒÙˆÙŠØ² Ø³Ø±ÙŠØ¹.",
          "Ø¶Ø¹ Ø¹Ù„Ø§Ù…Ø© <span class='kbd'>ØªÙ…</span> Ø¹Ù†Ø¯ ÙÙ‡Ù…Ùƒ Ù„Ù„Ø¯Ø±Ø³ â€” ÙŠÙØ­Ø³Ø¨ Ø§Ù„ØªÙ‚Ø¯Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.",
          "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¨Ø­Ø« Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø­Ø¯Ø¯."
        ],
        smart_label: "ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø°ÙƒÙŠ",
        smart_desc: "ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø°ÙƒÙŠ ÙŠÙØªØ­ Ù„Ùƒ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ§Ù„ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø§Ø¬ØªÙŠØ§Ø² Ø§Ù„ÙƒÙˆÙŠØ². Ø¥Ù† Ø£Ø­Ø¨Ø¨Øª Ø§Ù„ØªØ­Ø¯ÙŠØŒ Ø£Ø·ÙÙØ¦Ù‡ ÙˆØªØ¬ÙˆÙ‘Ù„ Ø¨Ø­Ø±ÙŠØ©.",
        search_ph: "Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¯Ø±ÙˆØ³: Ù…ØªØºÙŠØ±Ø§ØªØŒ Ø­Ù„Ù‚Ø§ØªØŒ ØªÙˆØ§Ø¨Ø¹â€¦",
        code_title: "Ù…Ø«Ø§Ù„ Ø¨Ø§ÙŠØ«ÙˆÙ†",
        copy: "Ù†Ø³Ø®",
        run: "ØªØ´ØºÙŠÙ„ (Ù…Ø­Ø§ÙƒØ§Ø©)",
        expected: "â€” Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ â€”",
        quiz_title: "âš¡ Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹",
        btn_done: "ØªÙ…",
        btn_show: "Ø¹Ø±Ø¶",
        status_done: "âœ… ØªÙ… ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© ØªÙ…",
        status_cleared: "ØªÙ… ØªØµÙÙŠØ± Ø§Ù„ØªÙ‚Ø¯Ù…",
        toast_copied: "âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯",
        toast_next: "â¡ï¸ ØªÙ… ÙØªØ­ Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ§Ù„ÙŠ",
        choose_first: "Ø§Ø®ØªØ± Ø¥Ø¬Ø§Ø¨Ø© Ø£ÙˆÙ„Ø§Ù‹",
        correct: "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ğŸ‰",
        wrong: "Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© â€” Ø¬Ø±Ù‘Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
        footer_made: "ØµÙÙ†Ø¹ Ø¨Ø­Ø¨ ÙˆØ¨Ù‚ÙˆØ© Ø§Ù„Ù€",
        footer_hydrate: "Ù„Ø§ ØªÙ†Ø³Ù Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡ ÙˆØ­Ù„ Ù…Ø³Ø£Ù„Ø© Ø¥Ø¶Ø§ÙÙŠØ© Ø§Ù„ÙŠÙˆÙ…!",
        levelsBadge: {
          beginner: "ğŸ¥š Ù…Ø¨ØªØ¯Ø¦",
          intermediate: "ğŸ§© Ù…ØªÙˆØ³Ø·",
          advanced: "ğŸš€ Ù…ØªÙ‚Ø¯Ù‘Ù…"
        },
        icons: {book:"ğŸ“˜", check:"âœ…"},
        confirm_reset: "Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØµÙÙŠØ± ØªÙ‚Ø¯Ù…Ùƒ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ"
      },
      en: {
        _dir: 'ltr',
        _lang: 'en',
        _name: 'English',
        hero_badge: "ğŸš€ Master Python â€” Smart progression + fun interactivity",
        hero_title: "Learn <span>Python</span> from Zero to Hero â€” step by step",
        hero_lead:  "Lightweight UI with neon vibes, saved progress, instant quizzes, and a simple code box that shows expected output â€” no external libraries.",
        lang_label: "ğŸŒ Language",
        export: "Export Progress",
        import: "Import",
        levels: "Levels",
        lessons: "Lessons",
        progress: "Progress",
        units: "Units",
        streak: "Keep your daily learning streak ğŸ”¥",
        level_all: "All",
        level_beginner: "Beginner",
        level_intermediate: "Intermediate",
        level_advanced: "Advanced",
        cp: "Control Panel",
        open_all: "Open All",
        collapse_all: "Collapse All",
        reset: "Reset Progress",
        tip_title: "Tip ğŸ‘‡",
        tips: [
          "Read the lesson, try it in the editor, then take the quick quiz.",
          "Mark <span class='kbd'>Done</span> when you understand â€” progress updates automatically.",
          "Use search to jump to a specific topic."
        ],
        smart_label: "Smart Progress",
        smart_desc: "Smart Mode opens the next lesson automatically after you pass a quiz. Prefer exploring? Turn it off and roam freely.",
        search_ph: "Search lessons: variables, loops, functionsâ€¦",
        code_title: "Python Example",
        copy: "Copy",
        run: "Run (simulate)",
        expected: "â€” Expected output appears here â€”",
        quiz_title: "âš¡ Quick Quiz",
        btn_done: "Done",
        btn_show: "Show",
        status_done: "âœ… Marked as done",
        status_cleared: "Progress reset",
        toast_copied: "âœ… Code copied",
        toast_next: "â¡ï¸ Next lesson opened",
        choose_first: "Choose an answer first",
        correct: "Correct ğŸ‰",
        wrong: "Wrong â€” try again",
        footer_made: "Built with love and",
        footer_hydrate: "Don't forget water and an extra problem today!",
        levelsBadge: {
          beginner: "ğŸ¥š Beginner",
          intermediate: "ğŸ§© Intermediate",
          advanced: "ğŸš€ Advanced"
        },
        icons: {book:"ğŸ“˜", check:"âœ…"},
        confirm_reset: "Do you want to reset your progress?"
      },
      fr: {
        _dir: 'ltr',
        _lang: 'fr',
        _name: 'FranÃ§ais',
        hero_badge: "ğŸš€ MaÃ®trisez Python â€” progression intelligente + interactivitÃ©",
        hero_title: "Apprenez <span>Python</span> de zÃ©ro Ã  expert â€” pas Ã  pas",
        hero_lead:  "Interface lÃ©gÃ¨re style nÃ©on, progression sauvegardÃ©e, quiz immÃ©diats et Ã©diteur simple affichant la sortie attendue â€” sans bibliothÃ¨ques externes.",
        lang_label: "ğŸŒ Langue",
        export: "Exporter la progression",
        import: "Importer",
        levels: "Niveaux",
        lessons: "LeÃ§ons",
        progress: "Progression",
        units: "UnitÃ©s",
        streak: "PrÃ©servez votre sÃ©rie d'apprentissage quotidienne ğŸ”¥",
        level_all: "Tous",
        level_beginner: "DÃ©butant",
        level_intermediate: "IntermÃ©diaire",
        level_advanced: "AvancÃ©",
        cp: "Panneau de contrÃ´le",
        open_all: "Tout ouvrir",
        collapse_all: "Tout rÃ©duire",
        reset: "RÃ©initialiser",
        tip_title: "Astuce ğŸ‘‡",
        tips: [
          "Lisez la leÃ§on, essayez dans lâ€™Ã©diteur, puis faites le quiz.",
          "Cochez <span class='kbd'>TerminÃ©</span> lorsque câ€™est compris â€” la progression se met Ã  jour automatiquement.",
          "Utilisez la recherche pour aller directement Ã  un sujet."
        ],
        smart_label: "Progression Intelligente",
        smart_desc: "Le mode intelligent ouvre la leÃ§on suivante automatiquement aprÃ¨s rÃ©ussite du quiz. Vous prÃ©fÃ©rez explorer ? DÃ©sactivez-le.",
        search_ph: "Rechercher : variables, boucles, fonctionsâ€¦",
        code_title: "Exemple Python",
        copy: "Copier",
        run: "ExÃ©cuter (simulation)",
        expected: "â€” La sortie attendue sâ€™affichera ici â€”",
        quiz_title: "âš¡ Quiz rapide",
        btn_done: "TerminÃ©",
        btn_show: "Afficher",
        status_done: "âœ… MarquÃ© comme terminÃ©",
        status_cleared: "Progression rÃ©initialisÃ©e",
        toast_copied: "âœ… Code copiÃ©",
        toast_next: "â¡ï¸ LeÃ§on suivante ouverte",
        choose_first: "Choisissez dâ€™abord une rÃ©ponse",
        correct: "Correct ğŸ‰",
        wrong: "Faux â€” rÃ©essayez",
        footer_made: "Fait avec amour et",
        footer_hydrate: "Nâ€™oubliez pas de boire de lâ€™eau et de rÃ©soudre un exercice de plus aujourdâ€™hui !",
        levelsBadge: {
          beginner: "ğŸ¥š DÃ©butant",
          intermediate: "ğŸ§© IntermÃ©diaire",
          advanced: "ğŸš€ AvancÃ©"
        },
        icons: {book:"ğŸ“˜", check:"âœ…"},
        confirm_reset: "Voulez-vous vraiment rÃ©initialiser votre progression ?"
      }
    };

    function getLang(){
      return localStorage.getItem(LANG_KEY) || (navigator.language||'ar').startsWith('ar') ? 'ar' :
             (navigator.language||'en').startsWith('fr') ? 'fr' : 'en';
    }

    function setLang(lang){
      localStorage.setItem(LANG_KEY, lang);
    }

    /* ============================================================
       Lessons data â€” multilingual titles, summaries & quizzes.
       Code/expect are language-agnostic (Python).
       ============================================================ */

    const lessons = [
      {
        id:"intro", level:"beginner",
        title:{ar:"Ù…Ù‚Ø¯Ù…Ø©: Ù…Ø§ Ù‡ÙŠ Ø¨Ø§ÙŠØ«ÙˆÙ†ØŸ", en:"Introduction: What is Python?", fr:"Introduction : Quâ€™est-ce que Python ?"},
        keywords:{
          ar:["intro","beginner","ØªØ¹Ø±ÙŠÙ"], en:["intro","beginner","definition"], fr:["intro","dÃ©butant","dÃ©finition"]
        },
        summary:{
          ar:"Ø¨Ø§ÙŠØ«ÙˆÙ† Ù„ØºØ© Ø¨Ø±Ù…Ø¬Ø© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø³ØªÙˆÙ‰ØŒ Ø³Ù‡Ù„Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆÙ…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Øª: Ù…Ù† Ø§Ù„Ø³ÙƒØ±Ø¨ØªØ§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.",
          en:"Python is a high-level programming language that is easy to read and versatile, from small scripts to AI.",
          fr:"Python est un langage de haut niveau, lisible et polyvalent : des scripts Ã  lâ€™IA."
        },
        code:`# Ø£ÙˆÙ„ Ø¨Ø±Ù†Ø§Ù…Ø¬\nprint('Hello, Python!')`,
        expect:`Hello, Python!`,
        quiz:{
          q:{ar:"Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªÙ‚ÙˆÙ… Ø¨Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© printØŸ", en:"What does the print function do?", fr:"Que fait la fonction print ?"},
          options:{
            ar:["ØªÙ‚Ø±Ø£ Ù…Ù† Ø§Ù„Ù…Ù„Ù","ØªØ·Ø¨Ø¹ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª","ØªØ­Ø°Ù Ù…ØªØºÙŠØ±Ø§Ù‹","ØªÙˆÙ‚Ù Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬"],
            en:["Reads from a file","Prints to output","Deletes a variable","Stops the program"],
            fr:["Lit depuis un fichier","Affiche sur la sortie","Supprime une variable","ArrÃªte le programme"]
          },
          a:1
        }
      },
      {
        id:"vars", level:"beginner",
        title:{ar:"Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©", en:"Variables & Basic Data Types", fr:"Variables et types de base"},
        keywords:{
          ar:["variables","types","int","str"], en:["variables","types","int","str"], fr:["variables","types","int","str"]
        },
        summary:{
          ar:"Ø§Ù„Ù…ØªØºÙŠØ± ØµÙ†Ø¯ÙˆÙ‚ ÙŠØ­Ù…Ù„ Ù‚ÙŠÙ…Ø©. Ø§Ù„Ø£Ù†ÙˆØ§Ø¹: int, float, str, bool. Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„ØªØµØ±ÙŠØ­ Ø§Ù„Ù†ÙˆØ¹ ØµØ±Ø§Ø­Ø©.",
          en:"A variable stores a value. Core types: int, float, str, bool. No explicit type declaration needed.",
          fr:"Une variable stocke une valeur. Types : int, float, str, bool. Pas de dÃ©claration explicite."
        },
        code:`x = 5\ny = 2.5\nname = 'Ali'\nis_student = True\nprint(type(x), type(y), type(name), type(is_student))`,
        expect:`<class 'int'> <class 'float'> <class 'str'> <class 'bool'>`,
        quiz:{
          q:{ar:"Ø£ÙŠ Ù†ÙˆØ¹ ÙŠÙ…Ø«Ù„ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ©ØŸ", en:"Which type represents boolean values?", fr:"Quel type reprÃ©sente les boolÃ©ens ?"},
          options:{
            ar:["int","str","bool","float"],
            en:["int","str","bool","float"],
            fr:["int","str","bool","float"]
          },
          a:2
        }
      },
      {
        id:"ops", level:"beginner",
        title:{ar:"Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ© ÙˆØ§Ù„Ù…Ù†Ø·Ù‚ÙŠØ©", en:"Arithmetic & Logical Operators", fr:"OpÃ©rateurs arithmÃ©tiques et logiques"},
        keywords:{ar:["operators","+","and","or"], en:["operators","+","and","or"], fr:["opÃ©rateurs","+","and","or"]},
        summary:{
          ar:"+ - * / // % ** Ù„Ù„Ø­Ø³Ø§Ø¨. Ù…Ù†Ø·Ù‚: and, or, not.",
          en:"+ - * / // % ** for math. Logic: and, or, not.",
          fr:"+ - * / // % ** pour le calcul. Logique : and, or, not."
        },
        code:`a, b = 7, 3\nprint(a + b, a - b, a * b, a / b)\nprint(a // b, a % b, a ** b)\nprint((a > b) and (b > 0))`,
        expect:`10 4 21 2.3333333333333335\n2 1 343\nTrue`,
        quiz:{
          q:{ar:"Ù†Ø§ØªØ¬ 7//3 ÙŠØ³Ø§ÙˆÙŠØŸ", en:"What is 7//3?", fr:"Quel est le rÃ©sultat de 7//3 ?"},
          options:{
            ar:["2","2.3","1","0"],
            en:["2","2.3","1","0"],
            fr:["2","2,3","1","0"]
          },
          a:0
        }
      },
      {
        id:"strings", level:"beginner",
        title:{ar:"Ø§Ù„Ø³Ù„Ø§Ø³Ù„ Ø§Ù„Ù†ØµÙŠØ© ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¹Ù„ÙŠÙ‡Ø§", en:"Strings & Common Operations", fr:"ChaÃ®nes de caractÃ¨res et opÃ©rations"},
        keywords:{ar:["strings","slice","len"], en:["strings","slice","len"], fr:["chaÃ®nes","slice","len"]},
        summary:{
          ar:"Ø§Ù„Ø³Ù„Ø§Ø³Ù„ ØºÙŠØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØºÙŠÙŠØ±. lenØŒ ÙÙ‡Ø±Ø³Ø©ØŒ ØªÙ‚Ø·ÙŠØ¹ØŒ upper/lower/replace.",
          en:"Strings are immutable. Use len, indexing, slicing and methods like upper/lower/replace.",
          fr:"Les chaÃ®nes sont immuables. len, indexation, dÃ©coupage, upper/lower/replace."
        },
        code:`s = 'Python'\nprint(len(s))\nprint(s[0], s[-1])\nprint(s[1:4])\nprint(s.lower(), s.upper())`,
        expect:`6\nP n\nyth\npython PYTHON`,
        quiz:{
          q:{ar:"Ù‡Ù„ Ø§Ù„Ø³Ù„Ø§Ø³Ù„ Ø§Ù„Ù†ØµÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØºÙŠÙŠØ±ØŸ", en:"Are strings mutable?", fr:"Les chaÃ®nes sont-elles mutables ?"},
          options:{
            ar:["Ù†Ø¹Ù…","Ù„Ø§"], en:["Yes","No"], fr:["Oui","Non"]
          },
          a:1
        }
      },
      {
        id:"if", level:"beginner",
        title:{ar:"Ø§Ù„ØªÙØ±Ø¹ Ø§Ù„Ø´Ø±Ø·ÙŠ if/elif/else", en:"Conditional Branching if/elif/else", fr:"Branchement conditionnel if/elif/else"},
        keywords:{ar:["if","elif","else"], en:["if","elif","else"], fr:["if","elif","else"]},
        summary:{
          ar:"Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø± Ø­Ø³Ø¨ Ø´Ø±Ø·. Ø§Ù†ØªØ¨Ù‡ Ù„Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø¨Ø§Ø¯Ø¦Ø©.",
          en:"Make decisions based on conditions. Mind indentation.",
          fr:"DÃ©cider selon une condition. Attention Ã  lâ€™indentation."
        },
        code:`score = 87\nif score >= 90:\n    grade = 'A'\nelif score >= 80:\n    grade = 'B'\nelse:\n    grade = 'C'\nprint(grade)`,
        expect:`B`,
        quiz:{
          q:{ar:"Ø§Ù„ÙƒÙ„  Ø© Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø«Ø§Ù†ÙŠØŸ", en:"Keyword for the second test branch?", fr:"Mot-clÃ© pour la seconde branche ?"},
          options:{
            ar:["elseif","elif","else if","elsif"],
            en:["elseif","elif","else if","elsif"],
            fr:["elseif","elif","else if","elsif"]
          },
          a:1
        }
      },
      {
        id:"loops", level:"beginner",
        title:{ar:"Ø§Ù„Ø­Ù„Ù‚Ø§Øª for Ùˆ while", en:"Loops: for & while", fr:"Boucles : for & while"},
        keywords:{ar:["loop","for","while","range"], en:["loop","for","while","range"], fr:["boucle","for","while","range"]},
        summary:{
          ar:"for Ù„Ù„ØªÙƒØ±Ø§Ø± Ø¹Ù„Ù‰ Ø¹Ù†Ø§ØµØ±ØŒ while Ù„Ù„ØªÙƒØ±Ø§Ø± Ø¨Ø´Ø±Ø·. Ø§Ø³ØªØ®Ø¯Ù… range Ù„Ù„Ø£Ø¹Ø¯Ø§Ø¯.",
          en:"Use for to iterate elements, while to loop with a condition. range for sequences.",
          fr:"for pour itÃ©rer, while pour une condition. range pour les sÃ©quences."
        },
        code:`for i in range(3):\n    print(i)\n\ncount = 3\nwhile count>0:\n    print('tick', count)\n    count -= 1`,
        expect:`0\n1\n2\ntick 3\ntick 2\ntick 1`,
        quiz:{
          q:{ar:"Ù…Ø§ Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙŠ ØªÙˆÙ„Ø¯ ØªØ³Ù„Ø³Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ØŸ", en:"Which function generates a sequence of numbers?", fr:"Quelle fonction gÃ©nÃ¨re une sÃ©quence de nombres ?"},
          options:{
            ar:["list","range","seq","iter"],
            en:["list","range","seq","iter"],
            fr:["list","range","seq","iter"]
          },
          a:1
        }
      },
      {
        id:"funcs", level:"intermediate",
        title:{ar:"Ø§Ù„Ø¯ÙˆØ§Ù„ (Functions)", en:"Functions", fr:"Fonctions"},
        keywords:{ar:["def","return","parameters"], en:["def","return","parameters"], fr:["def","return","paramÃ¨tres"]},
        summary:{
          ar:"ØªØ¹Ø±ÙŠÙ Ø¯Ø§Ù„Ø© Ø¨ÙƒÙ„Ù…Ø© def. return Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ù‚ÙŠÙ…Ø©. ÙˆØ³Ø§Ø¦Ø· positional/keyword ÙˆØ§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©.",
          en:"Define with def; return to give back a value. Positional/keyword & default args.",
          fr:"DÃ©finir avec def ; return pour renvoyer. Arguments positionnels/nommÃ©s & par dÃ©faut."
        },
        code:`def area(w, h=1):\n    return w*h\n\nprint(area(3,4))\nprint(area(5))\nprint(area(h=2, w=10))`,
        expect:`12\n5\n20`,
        quiz:{
          q:{ar:"ÙƒÙŠÙ ØªÙØ¹Ø±Ù‘Ù Ø¯Ø§Ù„Ø©ØŸ", en:"How do you define a function?", fr:"Comment dÃ©finir une fonction ?"},
          options:{
            ar:["func name()","def name():","function name()","define name()"],
            en:["func name()","def name():","function name()","define name()"],
            fr:["func name()","def name():","function name()","define name()"]
          },
          a:1
        }
      },
      {
        id:"lists", level:"intermediate",
        title:{ar:"Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… (List) ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ù‡Ù…Ø©", en:"Lists & Key Operations", fr:"Listes et opÃ©rations"},
        keywords:{ar:["list","append","slice","mutability"], en:["list","append","slice","mutability"], fr:["liste","append","slice","mutabilitÃ©"]},
        summary:{
          ar:"Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØºÙŠÙŠØ±. append, extend, insert, pop, remove, sort, slicing.",
          en:"Mutable. append, extend, insert, pop, remove, sort, slicing.",
          fr:"Mutable. append, extend, insert, pop, remove, sort, slicing."
        },
        code:`nums = [3,1,4]\nnums.append(1)\nnums.sort()\nprint(nums, nums[1:3])`,
        expect:`[1, 1, 3, 4] [1, 3]`,
        quiz:{
          q:{ar:"Ø£ÙŠ Ø§Ù„Ø¨Ù†Ù‰ Ø§Ù„ØªØ§Ù„ÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØºÙŠÙŠØ±ØŸ", en:"Which structure is mutable?", fr:"Quelle structure est mutable ?"},
          options:{
            ar:["list","tuple","str","frozenset"],
            en:["list","tuple","str","frozenset"],
            fr:["list","tuple","str","frozenset"]
          },
          a:0
        }
      },
      {
        id:"dicts", level:"intermediate",
        title:{ar:"Ø§Ù„Ù‚ÙˆØ§Ù…ÙŠØ³ (Dict)", en:"Dictionaries (dict)", fr:"Dictionnaires (dict)"},
        keywords:{ar:["dict","mapping","keys","values"], en:["dict","mapping","keys","values"], fr:["dict","mapping","keys","values"]},
        summary:{
          ar:"Ù…ÙØ§ØªÙŠØ­ Ù„Ù‚ÙŠÙ…. Ø§Ù„ÙˆØµÙˆÙ„ Ø¨Ø§Ù„Ù…ÙØªØ§Ø­. keys, values, items, get, update.",
          en:"Keys mapped to values. Access by key. keys, values, items, get, update.",
          fr:"ClÃ©s vers valeurs. AccÃ¨s par clÃ©. keys, values, items, get, update."
        },
        code:`user = {"name":"Sara","age":20}\nuser["lang"] = "Python"\nprint(user.get("age"), list(user.keys()))`,
        expect:`20 ['name', 'age', 'lang']`,
        quiz:{
          q:{ar:"Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙŠØ² dictØŸ", en:"What characterizes dict?", fr:"Quâ€™est-ce qui caractÃ©rise dict ?"},
          options:{
            ar:["Ù…Ø±ØªØ¨Ø© Ø¯Ø§Ø¦Ù…Ù‹Ø§","ØªÙ‚Ø¨Ù„ Ù…ÙØ§ØªÙŠØ­ Ù…ØªÙƒØ±Ø±Ø©","ØªØ±Ø¨Ø· Ù…ÙØªØ§Ø­Ù‹Ø§ Ø¨Ù‚ÙŠÙ…Ø©","ØªØ®Ø²Ù† Ø£Ø±Ù‚Ø§Ù…Ù‹Ø§ ÙÙ‚Ø·"],
            en:["Always ordered","Allows duplicate keys","Maps a key to a value","Stores only numbers"],
            fr:["Toujours ordonnÃ©","ClÃ©s dupliquÃ©es autorisÃ©es","Associe clÃ© Ã  valeur","Stocke seulement des nombres"]
          },
          a:2
        }
      },
      {
        id:"sets", level:"intermediate",
        title:{ar:"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª (Set)", en:"Sets", fr:"Ensembles (Set)"},
        keywords:{ar:["set","unique","union","intersection"], en:["set","unique","union","intersection"], fr:["set","unique","union","intersection"]},
        summary:{
          ar:"Ø¹Ù†Ø§ØµØ± ÙØ±ÙŠØ¯Ø©. Ø§ØªØ­Ø§Ø¯ |ØŒ ØªÙ‚Ø§Ø·Ø¹ &ØŒ ÙØ±Ù‚ -.",
          en:"Unique elements. Union |, intersection &, difference -.",
          fr:"Ã‰lÃ©ments uniques. Union |, intersection &, diffÃ©rence -."
        },
        code:`a = {1,2,3}\nb = {3,4}\nprint(a|b, a&b, a-b)`,
        expect:`{1, 2, 3, 4} {3} {1, 2}`,
        quiz:{
          q:{ar:"Ù†ØªÙŠØ¬Ø© {1,2}+{2,3} ÙÙŠ setØŸ", en:"Result of {1,2}+{2,3} as a set?", fr:"RÃ©sultat de {1,2}+{2,3} en set ?"},
          options:{
            ar:["{1,2,2,3}","{1,2,3}","{1,3}","{2}"],
            en:["{1,2,2,3}","{1,2,3}","{1,3}","{2}"],
            fr:["{1,2,2,3}","{1,2,3}","{1,3}","{2}"]
          },
          a:1
        }
      },
      {
        id:"tuples", level:"intermediate",
        title:{ar:"Ø§Ù„ØµÙÙˆÙ (Tuple) ÙˆØ§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Øª", en:"Tuples & Uses", fr:"Tuples et usages"},
        keywords:{ar:["tuple","immutable","packing","unpacking"], en:["tuple","immutable","packing","unpacking"], fr:["tuple","immutable","packing","unpacking"]},
        summary:{
          ar:"ØºÙŠØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØºÙŠÙŠØ±. Ù…ÙÙŠØ¯Ø© Ù„Ù„ØªØ¹Ø¨Ø¦Ø©/Ø§Ù„ØªÙØ±ÙŠØº ÙˆØ§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…ØªØ¹Ø¯Ø¯.",
          en:"Immutable, great for packing/unpacking and multi-returns.",
          fr:"Immutables, utiles pour packing/unpacking et retours multiples."
        },
        code:`pt = (3,4)\nx,y = pt\nprint(x,y)`,
        expect:`3 4`,
        quiz:{
          q:{ar:"Ù‡Ù„ tuple Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØºÙŠÙŠØ±ØŸ", en:"Are tuples mutable?", fr:"Les tuples sont-ils mutables ?"},
          options:{ar:["Ù†Ø¹Ù…","Ù„Ø§"], en:["Yes","No"], fr:["Oui","Non"]},
          a:1
        }
      },
      {
        id:"comp", level:"intermediate",
        title:{ar:"Comprehensions (Ù‚ÙˆØ§Ø¦Ù…/Ù…Ø¬Ù…ÙˆØ¹Ø§Øª/Ù‚ÙˆØ§Ù…ÙŠØ³)", en:"Comprehensions (list/set/dict)", fr:"ComprÃ©hensions (liste/ensemble/dict)"},
        keywords:{ar:["list comprehension","dict comp"], en:["list comprehension","dict comp"], fr:["list comprehension","dict comp"]},
        summary:{
          ar:"ØµÙŠØºØ© Ù…Ø®ØªØµØ±Ø© Ù„Ø¨Ù†Ø§Ø¡ Ø¨Ù†Ù‰ Ù…Ù† ØªÙƒØ±Ø§Ø± ÙˆØ´Ø±Ø·.",
          en:"Compact syntax to build structures from loops and conditions.",
          fr:"Syntaxe compacte pour construire via boucles et conditions."
        },
        code:`squares = [i*i for i in range(5)]\nevens = {i for i in range(10) if i%2==0}\nphone = {c:ord(c) for c in 'abc'}\nprint(squares)\nprint(evens)\nprint(phone)`,
        expect:`[0, 1, 4, 9, 16]\n{0, 2, 4, 6, 8}\n{'a': 97, 'b': 98, 'c': 99}`,
        quiz:{
          q:{ar:"Ù…Ø§ Ù†Ø§ØªØ¬ [i for i in range(3)]ØŸ", en:"Output of [i for i in range(3)]?", fr:"Sortie de [i for i in range(3)] ?"},
          options:{
            ar:["[0,1,2]","[1,2,3]","[0,1,2,3]","[2,1,0]"],
            en:["[0,1,2]","[1,2,3]","[0,1,2,3]","[2,1,0]"],
            fr:["[0,1,2]","[1,2,3]","[0,1,2,3]","[2,1,0]"]
          },
          a:0
        }
      },
      {
        id:"exceptions", level:"intermediate",
        title:{ar:"Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¡Ø§Øª ÙˆØ§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹Ù‡Ø§", en:"Exceptions & Handling", fr:"Exceptions et gestion"},
        keywords:{ar:["try","except","finally","raise"], en:["try","except","finally","raise"], fr:["try","except","finally","raise"]},
        summary:{
          ar:"Ø£Ø®Ø·Ø§Ø¡ ÙˆÙ‚Øª Ø§Ù„ØªØ´ØºÙŠÙ„ ØªÙÙ„ØªÙ‚Ø· Ø¨Ù€ try/except. Ø§Ø³ØªØ®Ø¯Ù… finally Ù„Ù„ØªÙ†Ø¸ÙŠÙ.",
          en:"Runtime errors are caught with try/except. Use finally for cleanup.",
          fr:"Les erreurs dâ€™exÃ©cution se gÃ¨rent avec try/except. finally pour le nettoyage."
        },
        code:`try:\n    x = int('10')\n    y = int('oops')\nexcept ValueError:\n    print('ØªØ­ÙˆÙŠÙ„ ØºÙŠØ± ØµØ§Ù„Ø­')\nfinally:\n    print('ØªÙ…')`,
        expect:`ØªØ­ÙˆÙŠÙ„ ØºÙŠØ± ØµØ§Ù„Ø­\nØªÙ…`,
        quiz:{
          q:{ar:"Ø£ÙŠ ÙƒØªÙ„Ø© ØªÙÙ†ÙØ° Ù…Ù‡Ù…Ø§ Ø­Ø¯Ø«ØŸ", en:"Which block always executes?", fr:"Quel bloc sâ€™exÃ©cute toujours ?"},
          options:{ar:["try","except","else","finally"], en:["try","except","else","finally"], fr:["try","except","else","finally"]},
          a:3
        }
      },
      {
        id:"files", level:"intermediate",
        title:{ar:"Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…Ù„ÙØ§Øª I/O", en:"File I/O", fr:"EntrÃ©es/Sorties de fichiers"},
        keywords:{ar:["open","read","with"], en:["open","read","with"], fr:["open","read","with"]},
        summary:{
          ar:"Ø§ÙØªØ­ Ø§Ù„Ù…Ù„Ù Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… with Ù„Ø¥ØºÙ„Ø§Ù‚Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§. Ø£Ù†Ù…Ø§Ø·: 'r','w','a','b'.",
          en:"Use with when opening files to auto-close. Modes: 'r','w','a','b'.",
          fr:"Utilisez with pour ouvrir et fermer automatiquement. Modes : 'r','w','a','b'."
        },
        code:`# Ù…Ø«Ø§Ù„ ØªÙˆØ¶ÙŠØ­ÙŠ ÙÙ‚Ø·\nwith open('data.txt','w', encoding='utf-8') as f:\n    f.write('hello')\nprint('ÙƒØªØ¨Ù†Ø§ Ù…Ù„ÙØ§Ù‹')`,
        expect:`ÙƒØªØ¨Ù†Ø§ Ù…Ù„ÙØ§Ù‹`,
        quiz:{
          q:{ar:"Ù…Ø§ ÙØ§Ø¦Ø¯Ø© with Ø¹Ù†Ø¯ ÙØªØ­ Ù…Ù„ÙØŸ", en:"Why use with when opening a file?", fr:"Pourquoi utiliser with lors de lâ€™ouverture ?"},
          options:{
            ar:["ØªÙ„ÙˆÙŠÙ† Ø§Ù„ÙƒÙˆØ¯","Ø¥ØºÙ„Ø§Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ù„Ù","ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©","ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø±ÙˆØ­Ø©"],
            en:["Syntax highlighting","Automatic file closing","Faster reading","Spin the fan"],
            fr:["Coloration syntaxique","Fermeture automatique","Lecture plus rapide","Faire tourner le ventilateur"]
          },
          a:1
        }
      },
      {
        id:"oop", level:"advanced",
        title:{ar:"Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙƒØ§Ø¦Ù†ÙŠØ© OOP", en:"Object-Oriented Programming (OOP)", fr:"Programmation orientÃ©e objet (POO)"},
        keywords:{ar:["class","object","init","inherit"], en:["class","object","init","inherit"], fr:["class","object","init","inherit"]},
        summary:{
          ar:"ØµÙ…Ù… ÙØ¦Ø§Øª Ø¨Ø®ØµØ§Ø¦Øµ ÙˆØ·Ø±Ù‚. __init__ Ù„Ù„Ù…ÙÙ‡ÙŠÙ‘Ø¦ØŒ Ø§Ù„ÙˆØ±Ø§Ø«Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù….",
          en:"Define classes with attributes/methods. __init__ is the initializer, inheritance for reuse.",
          fr:"DÃ©finissez des classes avec attributs/mÃ©thodes. __init__ initialise, hÃ©ritage pour rÃ©utiliser."
        },
        code:`class Person:\n    def __init__(self, name):\n        self.name = name\n    def hello(self):\n        return f'Hi, I\\'m {self.name}'\n\nprint(Person('Mona').hello())`,
        expect:`Hi, I'm Mona`,
        quiz:{
          q:{ar:"Ø§Ø³Ù… Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…ÙÙ‡ÙŠÙ‘Ø¦Ø©ØŸ", en:"Initializer method name?", fr:"Nom de la mÃ©thode dâ€™initialisation ?"},
          options:{ar:["construct","__start__","__init__","init"], en:["construct","__start__","__init__","init"], fr:["construct","__start__","__init__","init"]},
          a:2
        }
      },
      {
        id:"iter", level:"advanced",
        title:{ar:"Ø§Ù„Ù…ÙƒØ±Ø±Ø§Øª ÙˆØ§Ù„Ù…ÙˆÙ„Ù‘Ø¯Ø§Øª Iterators/Generators", en:"Iterators & Generators", fr:"ItÃ©rateurs & GÃ©nÃ©rateurs"},
        keywords:{ar:["__iter__","__next__","yield"], en:["__iter__","__next__","yield"], fr:["__iter__","__next__","yield"]},
        summary:{
          ar:"Ø§Ù„Ù…ÙˆÙ„Ù‘Ø¯Ø§Øª ØªØ³ØªØ®Ø¯Ù… yield Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø³Ù„Ø³Ù„Ø© Ù‚ÙŠÙ… ÙƒØ³ÙˆÙ„ÙŠØ§Ù‹.",
          en:"Generators use yield to lazily produce a sequence of values.",
          fr:"Les gÃ©nÃ©rateurs utilisent yield pour produire paresseusement des valeurs."
        },
        code:`def countdown(n):\n    while n>0:\n        yield n\n        n-=1\nprint(list(countdown(3)))`,
        expect:`[3, 2, 1]`,
        quiz:{
          q:{ar:"Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© ÙÙŠ Ø§Ù„Ù…ÙˆÙ„Ù‘Ø¯ØŸ", en:"Keyword used in generators?", fr:"Mot-clÃ© utilisÃ© dans les gÃ©nÃ©rateurs ?"},
          options:{ar:["yield","return","give","gen"], en:["yield","return","give","gen"], fr:["yield","return","give","gen"]},
          a:0
        }
      },
      {
        id:"decorators", level:"advanced",
        title:{ar:"Ø§Ù„Ù…Ø²ÙŠÙ‘Ù†Ø§Øª Decorators", en:"Decorators", fr:"DÃ©corateurs"},
        keywords:{ar:["@decorator","closure","func"], en:["@decorator","closure","func"], fr:["@decorator","closure","func"]},
        summary:{
          ar:"ØªØºÙ„ÙŠÙ Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø³Ù„ÙˆÙƒ Ù‚Ø¨Ù„/Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ°.",
          en:"Wrap a function to add behavior before/after execution.",
          fr:"Envelopper une fonction pour ajouter un comportement avant/aprÃ¨s."
        },
        code:`def logger(fn):\n    def wrap(*a, **k):\n        print('start')\n        out = fn(*a, **k)\n        print('end')\n        return out\n    return wrap\n\n@logger\ndef add(x,y):\n    return x+y\nprint(add(2,3))`,
        expect:`start\nend\n5`,
        quiz:{
          q:{ar:"Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø²ÙŠÙ‘Ù†ØŸ", en:"Symbol used to apply a decorator?", fr:"Symbole pour appliquer un dÃ©corateur ?"},
          options:{ar:["$","@","#","&"], en:["$","@","#","&"], fr:["$","@","#","&"]},
          a:1
        }
      },
      {
        id:"testing", level:"advanced",
        title:{ar:"Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ÙˆØ­Ø¯ÙˆÙŠØ© (ÙÙƒØ±Ø©)", en:"Unit Testing (idea)", fr:"Tests unitaires (idÃ©e)"},
        keywords:{ar:["unittest","assert"], en:["unittest","assert"], fr:["unittest","assert"]},
        summary:{
          ar:"Ø§ÙƒØªØ¨ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØªØ¶Ù…Ù† ØµØ­Ø© Ø§Ù„Ø³Ù„ÙˆÙƒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… unittest Ø£Ùˆ pytest.",
          en:"Write tests to ensure correct behavior using unittest or pytest.",
          fr:"Ã‰crivez des tests pour garantir le comportement avec unittest ou pytest."
        },
        code:`def add(a,b):\n    return a+b\n\n# ØªØµÙˆØ± Ù†Ø§ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø±\nprint('OK' if add(2,2)==4 else 'FAIL')`,
        expect:`OK`,
        quiz:{
          q:{ar:"Ø§Ù„ØºØ±Ø¶ Ù…Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§ØªØŸ", en:"Purpose of unit tests?", fr:"Objet des tests unitaires ?"},
          options:{
            ar:["Ø¥Ø¨Ø·Ø§Ø¡ Ø§Ù„ØªØ·ÙˆÙŠØ±","ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø¯Ø§Ø¦Ù…Ù‹Ø§","Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø³Ù„ÙˆÙƒ","ØªØ²ÙŠÙŠÙ† Ø§Ù„ÙƒÙˆØ¯"],
            en:["Slow down development","Always improve performance","Verify behavior","Decorate code"],
            fr:["Ralentir le dev","Toujours amÃ©liorer les perfs","VÃ©rifier le comportement","DÃ©corer le code"]
          },
          a:2
        }
      },
      {
        id:"algos", level:"advanced",
        title:{ar:"ØªÙ…Ø§Ø±ÙŠÙ† Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ©", en:"Classic Algorithm Exercises", fr:"Exercices dâ€™algorithmes classiques"},
        keywords:{ar:["algo","two pointers","DP"], en:["algo","two pointers","DP"], fr:["algo","two pointers","DP"]},
        summary:{
          ar:"Ù…Ø³Ø§Ø¦Ù„ ØªØ¯Ø±ÙŠØ¨ÙŠØ©: Ù…Ø¬Ù…ÙˆØ¹ Ø²ÙˆØ¬ØŒ ÙØ±Ø² Ù…Ø®ØµØµØŒ ØªÙƒØ±Ø§Ø± Ø£Ø­Ø±ÙØŒ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© Ø¨Ø³ÙŠØ·Ø©.",
          en:"Practice: two-sum, custom sort, char counts, basic DP.",
          fr:"Pratique : two-sum, tri personnalisÃ©, comptage, DP basique."
        },
        code:`def two_sum(nums, target):\n    seen = {}\n    for i, n in enumerate(nums):\n        if target-n in seen:\n            return [seen[target-n], i]\n        seen[n] = i\n\nprint(two_sum([2,7,11,15], 9))`,
        expect:`[0, 1]`,
        quiz:{
          q:{ar:"ØªØ¹Ù‚ÙŠØ¯ two_sum Ø¨Ø§Ù„Ù‡Ø§Ø´ØŸ", en:"Time complexity of two_sum using a hash map?", fr:"ComplexitÃ© de two_sum avec table de hachage ?"},
          options:{ar:["O(n^2)","O(n)","O(log n)","O(1)"], en:["O(n^2)","O(n)","O(log n)","O(1)"], fr:["O(n^2)","O(n)","O(log n)","O(1)"]},
          a:1
        }
      }
    ];

    /* ============================================================
       State, DOM refs & helpers
       ============================================================ */
    const lessonListEl   = document.getElementById('lessonList');
    const curriculumEl   = document.getElementById('curriculum');
    const searchInput    = document.getElementById('search');
    const progressBar    = document.getElementById('progressBar');
    const progressPct    = document.getElementById('progressPct');
    const completedCount = document.getElementById('completedCount');
    const smartMode      = document.getElementById('smartMode');
    const toast          = document.getElementById('toast');
    const levelChipsBox  = document.getElementById('levelChips');

    const expandAllBtn   = document.getElementById('expandAll');
    const collapseAllBtn = document.getElementById('collapseAll');
    const resetProgressBtn = document.getElementById('resetProgress');

    const langSelect     = document.getElementById('langSelect');
    const badgeLine      = document.getElementById('badgeLine');
    const heroTitle      = document.getElementById('heroTitle');
    const heroLead       = document.getElementById('heroLead');
    const langLabel      = document.getElementById('langLabel');
    const exportBtn      = document.getElementById('exportBtn');
    const importLbl      = document.getElementById('importLbl');
    const importFile     = document.getElementById('importFile');
    const smartLabel     = document.getElementById('smartLabel');
    const tipTitle       = document.getElementById('tipTitle');
    const tipsList       = document.getElementById('tipsList');
    const smartDesc      = document.getElementById('smartDesc');
    const footerMade     = document.getElementById('footerMade');
    const footerHydrate  = document.getElementById('footerHydrate');
    const streakMsg      = document.getElementById('streakMsg');

    let progress = loadProgress();
    let currentFilter = 'all';
    let currentLang = validateLang(localStorage.getItem(LANG_KEY) || getLang());

    function validateLang(l){ return ['ar','en','fr'].includes(l) ? l : 'ar'; }
    function loadProgress(){
      try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {}; }catch{ return {}; }
    }
    function saveProgress(state){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }
    function loadSmart(){ return localStorage.getItem(SMART_KEY)==='1'; }
    function saveSmart(v){ localStorage.setItem(SMART_KEY, v?'1':'0'); }

    function t(key){
      const pack = i18n[currentLang] || i18n.ar;
      return pack[key] ?? key;
    }

    function levelBadge(level){
      const pack = i18n[currentLang];
      if(level==='beginner') return pack.levelsBadge.beginner;
      if(level==='intermediate') return pack.levelsBadge.intermediate;
      return pack.levelsBadge.advanced;
    }

    function setDirAndLang(){
      document.documentElement.dir  = i18n[currentLang]._dir;
      document.documentElement.lang = i18n[currentLang]._lang;
      // Font priority: Cairo for AR content; Inter works everywhere
      document.body.style.fontFamily = currentLang==='ar'
        ? `"Cairo","Inter",system-ui,-apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Arial`
        : `"Inter","Cairo",system-ui,-apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Arial`;
    }

    /* ============================================================
       Rendering: Sidebar, Curriculum, Language application
       ============================================================ */

    function renderSidebar(filter='all', query=''){
      lessonListEl.innerHTML = '';
      const q = query.trim().toLowerCase();
      lessons.forEach((ls, idx)=>{
        const matchesLevel = (filter==='all' || ls.level===filter);
        const kw = (ls.keywords[currentLang]||[]).join(' ').toLowerCase();
        const title = ls.title[currentLang].toLowerCase();
        const matchesQuery = !q || title.includes(q) || kw.includes(q);
        if(matchesLevel && matchesQuery){
          const el = document.createElement('div');
          el.className = 'lesson-link' + (progress[ls.id]?.done ? ' done' : '');
          el.dataset.target = ls.id;
          el.setAttribute('role','button');
          el.setAttribute('tabindex','0');
          el.innerHTML = `<div style="flex:1">
              <div class="row" style="justify-content:space-between">
                <strong>${(idx+1).toString().padStart(2,'0')}. ${ls.title[currentLang]}</strong>
                <small>${levelBadge(ls.level)}</small>
              </div>
              <small>${(ls.keywords[currentLang]||[]).join(' Â· ')}</small>
            </div>
            <div>${progress[ls.id]?.done? i18n[currentLang].icons.check : i18n[currentLang].icons.book}</div>`;
          el.addEventListener('click', ()=> scrollToLesson(ls.id));
          el.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter'||ev.key===' ') scrollToLesson(ls.id); });
          lessonListEl.appendChild(el);
        }
      });
    }

    function buildCurriculum(){
      curriculumEl.innerHTML = '';
      lessons.forEach(ls=>{
        const card = document.createElement('div');
        card.className = 'lesson';
        card.id = `lesson-${ls.id}`;
        card.dataset.level = ls.level;

        const header = document.createElement('div');
        header.className = 'header';
        header.innerHTML = `<h3>${ls.title[currentLang]}</h3>
          <div class="meta">
            <span>${levelBadge(ls.level)}</span>
            <span class="kbd">${(ls.keywords[currentLang]||[''])[0]}</span>
            <button class="btn" data-done>${t('btn_done')}</button>
            <button class="btn ghost" data-toggle>${t('btn_show')}</button>
          </div>`;

        const body = document.createElement('div');
        body.className = 'body';
        body.innerHTML = `
          <p>${ls.summary[currentLang]}</p>
          <div class="codebox" style="margin:10px 0">
            <div class="toolbar">
              <div class="title">${t('code_title')}</div>
              <div class="actions">
                <button class="btn" data-copy>${t('copy')}</button>
                <button class="btn" data-run>${t('run')}</button>
              </div>
            </div>
            <textarea class="editor" spellcheck="false">${ls.code}</textarea>
            <div class="output" data-output>${t('expected')}</div>
          </div>
          <div class="quiz" data-quiz>
            <h4>${t('quiz_title')}</h4>
            <div class="qtext">${ls.quiz.q[currentLang]}</div>
            ${ls.quiz.options[currentLang].map((op,i)=>`
              <label class="option">
                <input type="radio" name="q-${ls.id}" value="${i}"> <span>${op}</span>
              </label>`).join('')}
            <button class="btn" data-check>${t('run')}</button>
            <div class="result" data-result></div>
          </div>
        `;

        card.appendChild(header); card.appendChild(body);
        curriculumEl.appendChild(card);

        // Events
        header.querySelector('[data-toggle]').addEventListener('click', ()=>{
          card.classList.toggle('open');
        });
        header.querySelector('[data-done]').addEventListener('click', ()=>{
          setDone(ls.id, !(progress[ls.id]?.done));
          updateUI();
          showToast(progress[ls.id]?.done ? t('status_done') : '');
        });

        const runBtn = body.querySelector('[data-run]');
        const copyBtn = body.querySelector('[data-copy]');
        const editor = body.querySelector('.editor');
        const output = body.querySelector('[data-output]');
        const quiz = body.querySelector('[data-quiz]');
        const checkBtn = body.querySelector('[data-check]');
        const result = body.querySelector('[data-result]');

        copyBtn.addEventListener('click', ()=>{
          navigator.clipboard.writeText(editor.value).then(()=>showToast(t('toast_copied')));
        });

        runBtn.addEventListener('click', ()=>{
          // Fake "run": show expected output; warn if code deviates significantly
          const expect = ls.expect.trim();
          const looksSimilar = editor.value.replace(/\s+/g,' ').trim().toLowerCase()
                                .includes(ls.code.replace(/\s+/g,' ').trim().toLowerCase().slice(0,24));
          output.textContent = looksSimilar ? expect : (expect + "\n(âš ï¸ " + (currentLang==='ar' ? "Ø¹Ø¯Ù‘Ù„Øª Ø§Ù„ÙƒÙˆØ¯ØŒ Ù‚Ø¯ ØªØ®ØªÙ„Ù Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª" : currentLang==='fr' ? "Vous avez modifiÃ© le code, la sortie peut diffÃ©rer" : "You altered the code; output may differ") + ")");
        });

        checkBtn.addEventListener('click', ()=>{
          const val = quiz.querySelector('input[type=radio]:checked');
          if(!val){ result.textContent = t('choose_first'); result.style.color = 'var(--warn)'; return; }
          if(+val.value === ls.quiz.a){
            result.textContent = t('correct');
            result.style.color = 'var(--good)';
            setDone(ls.id, true);
            updateUI();
            if(smartMode.checked){ openNext(ls.id); }
          }else{
            result.textContent = t('wrong');
            result.style.color = 'var(--bad)';
          }
        });
      });
    }

    function openNext(id){
      const idx = lessons.findIndex(x=>x.id===id);
      if(idx>=0 && idx<lessons.length-1){
        const next = document.getElementById('lesson-'+lessons[idx+1].id);
        if(next){ next.classList.add('open'); scrollToLesson(lessons[idx+1].id); showToast(t('toast_next')); }
      }
    }

    function setDone(id, done){
      progress[id] = progress[id] || {};
      progress[id].done = !!done;
      saveProgress(progress);
      const link = [...lessonListEl.children].find(el=>el.dataset.target===id);
      if(link){ link.classList.toggle('done', !!done); link.querySelector('div:last-child').textContent = done? i18n[currentLang].icons.check : i18n[currentLang].icons.book; }
    }

    function scrollToLesson(id){
      const el = document.getElementById('lesson-'+id);
      if(el){ el.classList.add('open'); window.scrollTo({ top: el.getBoundingClientRect().top + window.scrollY - 20, behavior:'smooth' }); }
    }

    function calcProgress(){
      const total = lessons.length;
      const done = lessons.filter(x=>progress[x.id]?.done).length;
      const pct = Math.round((done/total)*100);
      progressBar.style.width = pct+'%';
      progressPct.textContent = pct+'%';
      completedCount.textContent = `${done}/${total}`;
    }

    function updateUI(){
      // Static labels via i18n
      document.querySelector('[data-i18n="levels"]').textContent = t('levels');
      document.querySelector('[data-i18n="lessons"]').textContent = t('lessons');
      document.querySelector('[data-i18n="progress"]').textContent = t('progress');
      document.querySelector('[data-i18n="units"]').textContent = t('units');
      document.querySelector('[data-i18n="level_all"]').textContent = t('level_all');
      document.querySelector('[data-i18n="level_beginner"]').textContent = t('level_beginner');
      document.querySelector('[data-i18n="level_intermediate"]').textContent = t('level_intermediate');
      document.querySelector('[data-i18n="level_advanced"]').textContent = t('level_advanced');
      document.querySelector('[data-i18n="control_panel"]').textContent = t('cp');
      document.querySelector('[data-i18n="open_all"]').textContent = t('open_all');
      document.querySelector('[data-i18n="collapse_all"]').textContent = t('collapse_all');
      document.querySelector('[data-i18n="reset"]').textContent = t('reset');

      exportBtn.textContent = t('export');
      importLbl.textContent = t('import');
      langLabel.textContent = t('lang_label');
      searchInput.placeholder = t('search_ph');
      badgeLine.textContent = t('hero_badge');
      heroTitle.innerHTML   = t('hero_title');
      heroLead.textContent  = t('hero_lead');
      smartLabel.textContent= t('smart_label');
      tipTitle.textContent  = t('tip_title');
      tipsList.innerHTML    = i18n[currentLang].tips.map(li=>`<li>${li}</li>`).join('');
      smartDesc.textContent = t('smart_desc');
      footerMade.textContent= t('footer_made');
      footerHydrate.textContent = t('footer_hydrate');
      streakMsg.textContent = t('streak');

      // Rebuild dynamic parts in the selected language
      renderSidebar(currentFilter, searchInput.value);
      buildCurriculum();
      calcProgress();

      // Activate selected chip visually
      [...levelChipsBox.children].forEach(ch => ch.classList.toggle('active', ch.dataset.filter===currentFilter));
    }

    function showToast(msg){
      if(!msg) return;
      toast.textContent = msg; toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), 1600);
    }

    /* ============================================================
       Filters & Search
       ============================================================ */
    levelChipsBox.querySelectorAll('.chip').forEach(ch=>{
      ch.addEventListener('click', ()=>{
        currentFilter = ch.dataset.filter;
        [...levelChipsBox.children].forEach(c=>c.classList.remove('active'));
        ch.classList.add('active');
        updateUI();
      });
    });

    searchInput.addEventListener('input', ()=>{
      renderSidebar(currentFilter, searchInput.value);
    });

    /* ============================================================
       Controls: expand/collapse/reset, smart mode
       ============================================================ */
    expandAllBtn.addEventListener('click', ()=>{
      document.querySelectorAll('.lesson').forEach(l=>l.classList.add('open'));
    });
    collapseAllBtn.addEventListener('click', ()=>{
      document.querySelectorAll('.lesson').forEach(l=>l.classList.remove('open'));
    });
    resetProgressBtn.addEventListener('click', ()=>{
      if(confirm(t('confirm_reset'))){
        progress = {}; saveProgress(progress); updateUI(); showToast(t('status_cleared'));
      }
    });

    smartMode.checked = loadSmart();
    smartMode.addEventListener('change', ()=> saveSmart(smartMode.checked));

    /* ============================================================
       Language switching + persistence
       ============================================================ */
    function applyLanguage(lang){
      currentLang = validateLang(lang);
      setLang(currentLang);
      setDirAndLang();
      langSelect.value = currentLang;
      updateUI();
    }

    langSelect.addEventListener('change', (e)=>{
      applyLanguage(e.target.value);
    });

    /* ============================================================
       Export / Import progress (JSON file)
       ============================================================ */
    exportBtn.addEventListener('click', ()=>{
      const data = {
        _app: "PyGalaxy",
        _ver: 1,
        lang: currentLang,
        smart: smartMode.checked,
        progress
      };
      const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `pygalaxy-progress-${Date.now()}.json`;
      document.body.appendChild(a);
      a.click();
      setTimeout(()=>{ document.body.removeChild(a); URL.revokeObjectURL(url); }, 0);
    });

    importFile.addEventListener('change', (ev)=>{
      const file = ev.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = ()=>{
        try{
          const data = JSON.parse(reader.result);
          if(data && data._app==='PyGalaxy'){
            progress = data.progress || {};
            saveProgress(progress);
            const lang = validateLang(data.lang||currentLang);
            const smart = !!data.smart;
            smartMode.checked = smart; saveSmart(smart);
            applyLanguage(lang);
            showToast(i18n[currentLang].status_done);
          }else{
            alert("Invalid file.");
          }
        }catch(e){
          alert("Invalid file.");
        }
      };
      reader.readAsText(file);
      // Reset input so the same file can be re-imported later if needed
      ev.target.value = '';
    });

    /* ============================================================
       Initial render
       ============================================================ */
    applyLanguage(currentLang);
  </script>
</body>
</html>
